{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  name: \"studentInfo\",\n\n  data() {\n    return {\n      form: {\n        studentId: this.$cookies.get(\"data\").studentId\n      },\n      dialogVisible: false,\n      tableData: []\n    };\n  },\n\n  created() {\n    this.load();\n  },\n\n  methods: {\n    load() {\n      request.get(\"/student/\" + this.$cookies.get(\"data\").studentId).then(res => {\n        if (res.code === '0') {\n          console.log(res);\n          this.tableData = res.data.records;\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n      });\n    },\n\n    Update() {\n      console.log(this.form); // this.form.studentId = this.$cookies.get(\"data\").studentId\n\n      request.put(\"/student\", this.form).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            type: \"success\",\n            message: \"更新成功\"\n          }); // if(this.$cookies.get(\"data\").pwd !== res.data.pwd){\n          //   this.$router.push(\"/logout\")\n          // }else {\n          //   this.$router.push(\"/studentIndex\")//登录成功之后进行页面跳转，跳转到主页\n          // }\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n\n        this.load(); //刷新表格的数据\n\n        this.dialogVisible = false; //关闭弹窗\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4CA,OAAOA,OAAP,MAAoB,iBAApB;AAEA,eAAe;AACbC,MAAI,EAAE,aADO;;AAEbC,MAAI,GAAE;AACJ,WAAM;AACJC,UAAI,EAAC;AACHC,iBAAS,EAAC,KAAKC,QAAL,CAAcC,GAAd,CAAkB,MAAlB,EAA0BF;AADjC,OADD;AAIJG,mBAAa,EAAC,KAJV;AAKJC,eAAS,EAAC;AALN,KAAN;AAOD,GAVY;;AAWbC,SAAO,GAAG;AACR,SAAKC,IAAL;AACD,GAbY;;AAcbC,SAAO,EAAC;AACND,QAAI,GAAE;AACJV,aAAO,CAACM,GAAR,CAAY,cAAY,KAAKD,QAAL,CAAcC,GAAd,CAAkB,MAAlB,EAA0BF,SAAlD,EAA6DQ,IAA7D,CAAkEC,GAAE,IAAK;AACvE,YAAIA,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB;AACpBC,iBAAO,CAACC,GAAR,CAAYH,GAAZ;AACA,eAAKL,SAAL,GAAiBK,GAAG,CAACX,IAAJ,CAASe,OAA1B;AACF,SAHA,MAGO;AACL,eAAKC,QAAL,CAAc;AACZC,gBAAI,EAAE,OADM;AAEZC,mBAAO,EAAEP,GAAG,CAACQ;AAFD,WAAd;AAIF;AAED,OAXD;AAYD,KAdK;;AAeNC,UAAM,GAAG;AACPP,aAAO,CAACC,GAAR,CAAY,KAAKb,IAAjB,EADO,CAEP;;AACAH,aAAO,CAACuB,GAAR,CAAY,UAAZ,EAAwB,KAAKpB,IAA7B,EAAmCS,IAAnC,CAAwCC,GAAE,IAAK;AAC7C,YAAIA,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB;AACpB,eAAKI,QAAL,CAAc;AACZC,gBAAI,EAAE,SADM;AAEZC,mBAAO,EAAE;AAFG,WAAd,EADoB,CAKpB;AACA;AACA;AACA;AACA;AACF,SAVA,MAUO;AACL,eAAKF,QAAL,CAAc;AACZC,gBAAI,EAAE,OADM;AAEZC,mBAAO,EAAEP,GAAG,CAACQ;AAFD,WAAd;AAIF;;AACA,aAAKX,IAAL,GAjB6C,CAiBlC;;AACX,aAAKH,aAAL,GAAqB,KAArB,CAlB6C,CAkBjB;AAC7B,OAnBD;AAoBF;;AAtCM;AAdK,CAAf","names":["request","name","data","form","studentId","$cookies","get","dialogVisible","tableData","created","load","methods","then","res","code","console","log","records","$message","type","message","msg","Update","put"],"sourceRoot":"","sources":["F:\\21-22-2\\大三短学期\\大作业\\Spring-Vue-Exam-Pure-main\\Spring-Vue-Exam-Pure-main\\vue\\src\\components\\personInfos\\StudentInfo.vue"],"sourcesContent":["<template>\r\n  <div v-wechat-title=\"$route.meta.title\" style=\"padding: 20px\">\r\n    <el-card style=\"width: 70%; margin: 0 auto\">\r\n      <!--表格-->\r\n      <el-table\r\n          :data=\"tableData\"\r\n          stripe\r\n          height=\"200\"\r\n          style=\"width: 100%; text-align: center\"\r\n          border>\r\n        <el-table-column prop=\"studentName\" label=\"昵称\"/>\r\n        <el-table-column prop=\"grade\" label=\"年级\"/>\r\n        <el-table-column prop=\"sex\" label=\"性别\"/>\r\n        <el-table-column prop=\"major\" label=\"专业\"/>\r\n        <el-table-column prop=\"tel\" label=\"电话\"/>\r\n        <el-table-column prop=\"pwd\" label=\"密码\"/>\r\n        <el-table-column prop=\"email\" label=\"邮箱\"/>\r\n        <el-table-column label=\"操作\">\r\n          <template #default=\"scope\">\r\n            <el-button type=\"primary\" color=\"#626aef\" plain @click=\"dialogVisible = true\">修改密码</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n    </el-card>\r\n\r\n    <el-dialog v-model=\"dialogVisible\" title=\"提示\" width=\"30%\">\r\n      <el-form :model=\"form\" label-width=\"120px\">\r\n        <el-form-item label=\"密码\">\r\n          <el-input v-model=\"form.pwd\" style=\"width:80%\"/>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"Update\">确认</el-button>\r\n      </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: \"studentInfo\",\r\n  data(){\r\n    return{\r\n      form:{\r\n        studentId:this.$cookies.get(\"data\").studentId,\r\n      },\r\n      dialogVisible:false,\r\n      tableData:[],\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n  },\r\n  methods:{\r\n    load(){\r\n      request.get(\"/student/\"+this.$cookies.get(\"data\").studentId).then(res => {\r\n        if (res.code === '0') {\r\n          console.log(res)\r\n          this.tableData = res.data.records\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg\r\n          })\r\n        }\r\n\r\n      })\r\n    },\r\n    Update() {\r\n      console.log(this.form)\r\n      // this.form.studentId = this.$cookies.get(\"data\").studentId\r\n      request.put(\"/student\", this.form).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"更新成功\"\r\n          })\r\n          // if(this.$cookies.get(\"data\").pwd !== res.data.pwd){\r\n          //   this.$router.push(\"/logout\")\r\n          // }else {\r\n          //   this.$router.push(\"/studentIndex\")//登录成功之后进行页面跳转，跳转到主页\r\n          // }\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg\r\n          })\r\n        }\r\n        this.load()//刷新表格的数据\r\n        this.dialogVisible = false  //关闭弹窗\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}