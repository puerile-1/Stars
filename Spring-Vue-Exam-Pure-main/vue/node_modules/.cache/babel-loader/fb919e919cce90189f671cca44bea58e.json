{"ast":null,"code":"import request from \"@/utils/request\";\nimport * as echarts from 'echarts';\nexport default {\n  name: \"gradePart\",\n\n  data() {\n    return {\n      isNull: false,\n      //是否有成绩标志位\n      name: null,\n      category: {\n        //保存分数段\n        '90分及以上': 0,\n        '80-89分': 0,\n        '70-79分': 0,\n        '60-69分': 0,\n        '60分以下': 0\n      }\n    };\n  },\n\n  created() {\n    this.getScoreInfo();\n  },\n\n  methods: {\n    getScoreInfo() {\n      let examCode = this.$route.query.examCode;\n      this.name = this.$route.query.source;\n      console.log(this.name);\n      request.get(\"/score\", {\n        params: {\n          search: examCode\n        }\n      }).then(res => {\n        console.log(res);\n        let data = res.data.records;\n\n        if (data.length > 0) {\n          let box = this.$refs['box'];\n          let charts = echarts.init(box);\n          data.forEach(element => {\n            switch (element.etScore / 10) {\n              case 10:\n              case 9:\n                this.category[\"90分及以上\"]++;\n                break;\n\n              case 8:\n                this.category['80-89分']++;\n                break;\n\n              case 7:\n                this.category[\"70-79分\"]++;\n                break;\n\n              case 6:\n                this.category['60-69分']++;\n                break;\n\n              default:\n                this.category['60分以下']++;\n            }\n          });\n          let option = {\n            title: {\n              text: `${res.data.records[\"0\"].subject}分数段图`,\n              subtext: '分数段饼图',\n              x: 'center'\n            },\n            tooltip: {\n              trigger: 'item',\n              formatter: \"{a}：{b} <br/> {c}人 ({d}%)\"\n            },\n            legend: {\n              orient: 'vertical',\n              left: 'left',\n              data: ['90分及以上', '80-89分', '70-79分', '60-69分', '60分以下']\n            },\n            series: [{\n              name: '分数段',\n              type: 'pie',\n              radius: '35%',\n              center: ['50%', '35%'],\n              data: [{\n                value: this.category['90分及以上'],\n                name: '90分及以上'\n              }, {\n                value: this.category['80-89分'],\n                name: '80-89分'\n              }, {\n                value: this.category['70-79分'],\n                name: '70-79分'\n              }, {\n                value: this.category['60-69分'],\n                name: '60-69分'\n              }, {\n                value: this.category['60分以下'],\n                name: '60分以下'\n              }],\n              itemStyle: {\n                emphasis: {\n                  shadowBlur: 10,\n                  shadowOffsetX: 0,\n                  shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n              }\n            }]\n          };\n          charts.setOption(option);\n        } else {\n          this.isNull = true;\n        }\n      });\n    },\n\n    goBack() {\n      this.$router.push({\n        path: '/scorePartOne',\n        query: {\n          examCode: this.$route.query.examCode\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","echarts","name","data","isNull","category","created","getScoreInfo","methods","examCode","$route","query","source","console","log","get","params","search","then","res","records","length","box","$refs","charts","init","forEach","element","etScore","option","title","text","subject","subtext","x","tooltip","trigger","formatter","legend","orient","left","series","type","radius","center","value","itemStyle","emphasis","shadowBlur","shadowOffsetX","shadowColor","setOption","goBack","$router","push","path"],"sourceRoot":"","sources":["F:\\21-22-2\\大三短学期\\大作业\\Spring-Vue-Exam-Pure-main\\Spring-Vue-Exam-Pure-main\\vue\\src\\components\\charts\\GradePart.vue"],"sourcesContent":["<template>\r\n  <div class=\"part\" >\r\n    <el-page-header  content=\"\" @back=\"goBack\" />\r\n    <div class=\"box\" ref=\"box\"></div>\r\n    <div v-if=\"isNull\">\r\n      <span>该门考试还没人参考哦,请提醒学生参加考试。</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nimport * as echarts from 'echarts'\r\nexport default {\r\n  name: \"gradePart\",\r\n  data() {\r\n    return {\r\n      isNull: false, //是否有成绩标志位\r\n      name: null,\r\n      category: { //保存分数段\r\n        '90分及以上': 0,\r\n        '80-89分': 0,\r\n        '70-79分': 0,\r\n        '60-69分': 0,\r\n        '60分以下': 0,\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getScoreInfo()\r\n\r\n  },\r\n  methods: {\r\n    getScoreInfo() {\r\n      let examCode = this.$route.query.examCode\r\n      this.name = this.$route.query.source\r\n      console.log(this.name)\r\n      request.get(\"/score\",{\r\n        params:{\r\n          search:examCode\r\n        }\r\n      }).then(res => {\r\n        console.log(res)\r\n        let data = res.data.records\r\n        if(data.length > 0) {\r\n          let box = this.$refs['box']\r\n          let charts = echarts.init(box)\r\n          data.forEach(element => {\r\n            switch(element.etScore / 10) {\r\n              case 10:\r\n              case 9:\r\n                this.category[\"90分及以上\"]++\r\n                break\r\n              case 8:\r\n                this.category['80-89分']++\r\n                break\r\n              case 7:\r\n                this.category[\"70-79分\"]++\r\n                break\r\n              case 6:\r\n                this.category['60-69分']++\r\n                break\r\n              default:\r\n                this.category['60分以下']++\r\n            }\r\n          });\r\n          let option = {\r\n            title : {\r\n              text: `${res.data.records[\"0\"].subject}分数段图`,\r\n              subtext: '分数段饼图',\r\n              x:'center'\r\n            },\r\n            tooltip : {\r\n              trigger: 'item',\r\n              formatter: \"{a}：{b} <br/> {c}人 ({d}%)\"\r\n            },\r\n            legend: {\r\n              orient: 'vertical',\r\n              left: 'left',\r\n              data: ['90分及以上','80-89分','70-79分','60-69分','60分以下']\r\n            },\r\n            series : [\r\n              {\r\n                name: '分数段',\r\n                type: 'pie',\r\n                radius : '35%',\r\n                center: ['50%', '35%'],\r\n                data:[\r\n                  {value:this.category['90分及以上'], name:'90分及以上'},\r\n                  {value:this.category['80-89分'], name:'80-89分'},\r\n                  {value:this.category['70-79分'], name:'70-79分'},\r\n                  {value:this.category['60-69分'], name:'60-69分'},\r\n                  {value:this.category['60分以下'], name:'60分以下'}\r\n                ],\r\n                itemStyle: {\r\n                  emphasis: {\r\n                    shadowBlur: 10,\r\n                    shadowOffsetX: 0,\r\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                  }\r\n                }\r\n              }\r\n            ]\r\n          };\r\n          charts.setOption(option)\r\n        }else {\r\n          this.isNull = true\r\n        }\r\n      })\r\n    },\r\n    goBack(){\r\n         this.$router.push({path:'/scorePartOne',query:{examCode: this.$route.query.examCode }})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.part {\r\n  padding: 10px;\r\n  .box {\r\n    padding: 40px;\r\n    width: 800px;\r\n    height: 800px;\r\n    margin-left: 40px;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}