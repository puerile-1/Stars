{"ast":null,"code":"import request from \"@/utils/request\";\nimport * as echarts from 'echarts';\nexport default {\n  name: \"Grade\",\n\n  data() {\n    return {\n      isNull: false,\n      //原始数据\n      tableDataX: [],\n      //x轴数据 保存次数\n      tableDataY: [],\n      //y轴数据 保存分数\n      title: [],\n      exam_subject: [],\n      rootData: [],\n      name: ''\n    };\n  },\n\n  mounted() {\n    this.score();\n  },\n\n  methods: {\n    score() {\n      let studentId = this.$route.query.studentId;\n      request.get(\"/score/\" + studentId).then(res => {\n        //根据学生Id查询成绩\n        console.log(res);\n\n        if (res.code === '0') {\n          this.rootData = res.data.records;\n          this.name = this.rootData[0].studentName;\n          this.rootData.forEach((element, index) => {\n            this.tableDataX.push(`第${index + 1}次`);\n            this.tableDataY.push(element.etScore);\n            this.exam_subject.push(element.subject);\n          });\n          let boxDom = this.$refs[\"box\"]; // console.log(boxDom)\n\n          let scoreCharts = echarts.init(boxDom); // let scoreCharts = this.echarts.init(boxDom);\n\n          let option = {\n            title: {\n              text: this.name\n            },\n            backgroundColor: '#f1ecec',\n            tooltip: {\n              type: \"shadow\",\n              trigger: 'axis',\n\n              // 自定义悬浮框展示的内容。此json对象的内容可自定义，我只是举个例子。{name: '内容标题'， value：'可以是任意字符，根据业务需求来吧'}\n              formatter(params) {\n                // console.log(params.value)\n                return `考试科目：${this.rootData[params[0].axisIndex].subject} 时间：${this.rootData[params[0].axisIndex].answerDate}`;\n              }\n\n            },\n            xAxis: {\n              type: \"category\",\n              data: this.tableDataX\n            },\n            yAxis: {\n              type: \"value\"\n            },\n            series: [{\n              data: this.tableDataY,\n              type: \"line\",\n              itemStyle: {\n                normal: {\n                  label: {\n                    show: true\n                  }\n                }\n              }\n            }]\n          };\n          scoreCharts.setOption(option);\n          scoreCharts.on(\"mouseover\", params => {\n            console.log(params);\n          });\n        } else {\n          this.isNull = true;\n        }\n      });\n    },\n\n    goBack() {\n      if (this.$cookies.get(\"data\").role == 1) this.$router.push({\n        path: '/scoreOne',\n        query: {\n          studentId: this.$route.query.studentId\n        }\n      });else {\n        this.$router.push({\n          path: '/adminScoreOne',\n          query: {\n            studentId: this.$route.query.studentId\n          }\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","echarts","name","data","isNull","tableDataX","tableDataY","title","exam_subject","rootData","mounted","score","methods","studentId","$route","query","get","then","res","console","log","code","records","studentName","forEach","element","index","push","etScore","subject","boxDom","$refs","scoreCharts","init","option","text","backgroundColor","tooltip","type","trigger","formatter","params","axisIndex","answerDate","xAxis","yAxis","series","itemStyle","normal","label","show","setOption","on","goBack","$cookies","role","$router","path"],"sourceRoot":"","sources":["F:\\21-22-2\\大三短学期\\大作业\\Spring-Vue-Exam-Pure-main\\Spring-Vue-Exam-Pure-main\\vue\\src\\components\\charts\\Grade.vue"],"sourcesContent":["<template>\r\n  <div id=\"grade\">\r\n    <el-page-header  content=\"\" @back=\"goBack\" />\r\n    <div ref=\"box\" class=\"box\"></div>\r\n    <div class=\"notFound\" v-if=\"isNull\">\r\n      <i class=\"iconfont icon-LC_icon_tips_fill\"></i><span>该考生未参加考试</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport request from \"@/utils/request\";\r\nimport * as echarts from 'echarts'\r\nexport default {\r\n  name: \"Grade\",\r\n  data() {\r\n    return {\r\n      isNull: false, //原始数据\r\n      tableDataX: [], //x轴数据 保存次数\r\n      tableDataY: [], //y轴数据 保存分数\r\n      title: [],\r\n      exam_subject: [],\r\n      rootData:[],\r\n      name: ''\r\n    }\r\n  },\r\n  mounted() {\r\n    this.score();\r\n  },\r\n  methods: {\r\n    score() {\r\n      let studentId = this.$route.query.studentId\r\n      request.get(\"/score/\"+studentId).then(res => { //根据学生Id查询成绩\r\n        console.log(res)\r\n        if(res.code === '0') {\r\n          this.rootData = res.data.records\r\n          this.name = this.rootData[0].studentName\r\n          this.rootData.forEach((element,index) => {\r\n            this.tableDataX.push(`第${index + 1}次`)\r\n            this.tableDataY.push(element.etScore)\r\n            this.exam_subject.push(element.subject)\r\n          });\r\n          let boxDom = this.$refs[\"box\"];\r\n          // console.log(boxDom)\r\n          let scoreCharts = echarts.init(boxDom)\r\n          // let scoreCharts = this.echarts.init(boxDom);\r\n          let option = {\r\n             title: {\r\n               text: this.name\r\n             },\r\n            backgroundColor: '#f1ecec',\r\n            tooltip: {\r\n              type:\"shadow\",\r\n              trigger: 'axis',\r\n              // 自定义悬浮框展示的内容。此json对象的内容可自定义，我只是举个例子。{name: '内容标题'， value：'可以是任意字符，根据业务需求来吧'}\r\n              formatter(params) {\r\n                // console.log(params.value)\r\n                return `考试科目：${this.rootData[params[0].axisIndex].subject} 时间：${this.rootData[params[0].axisIndex].answerDate}`\r\n              }\r\n            },\r\n            xAxis: {\r\n              type: \"category\",\r\n              data: this.tableDataX\r\n            },\r\n            yAxis: {\r\n              type: \"value\"\r\n            },\r\n            series: [\r\n              {\r\n                data: this.tableDataY,\r\n                type: \"line\",\r\n                itemStyle: { normal: { label: { show: true } } }\r\n              }\r\n            ]\r\n          };\r\n          scoreCharts.setOption(option);\r\n          scoreCharts.on(\"mouseover\", params => {\r\n            console.log(params);\r\n          });\r\n        }else {\r\n          this.isNull = true\r\n        }\r\n      })\r\n    },\r\n    goBack(){\r\n      if(this.$cookies.get(\"data\").role == 1)\r\n        this.$router.push({path:'/scoreOne',query:{studentId:this.$route.query.studentId}})\r\n      else {\r\n        this.$router.push({path:'/adminScoreOne',query:{studentId:this.$route.query.studentId}})\r\n\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#grade {\r\n  padding: 20px;\r\n  position: relative;\r\n  .box{\r\n    padding: 30px;\r\n    width: 1500px;\r\n    height: 700px;\r\n  }\r\n  .notFound {\r\n    position: absolute;\r\n    top: 20px;\r\n    left: 20px;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}